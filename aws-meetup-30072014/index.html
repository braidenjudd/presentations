<!doctype html>

<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>AWS Meetup Melbourne - Microservices</title>
		<meta name="description" content="Angular Meetup Melbourne - Protractor JS">
		<meta name="author" content="Braiden Judd">
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
		<link rel="stylesheet" href="css/style.css">
	</head>

	<body>
		<textarea id="source">

		name: inverse
		layout: true
		class: center, middle

		---

		class: inverse

		# Microservices
		*Or fine grained architecture*

		---

		class: inverse

		# Braiden Judd
		> Work at Suncorp
		>
		> @pragmaticyclist

		---

		class: inverse

		# Agenda

		### Part I: Introduction
		### Part II: Benefits
		### Part III: Considerations
		### Part IV: Getting started

		???

		I need to say what I want the audience to get out of the talk by the end.

		* Never heard of it? Have the drive to go out and see what it is about
		* I know it a little, maybe have a bit more of an idea on how it might help and how they can get started
		* If they are an expert they have seen what another person 

		---

		class: inverse

		# Disclaimer

		???

		* This is a broad topic and there is no real one size fits all
		* I'm not an expert in your problem domain, so like when you call a bank, this is general advice not personal advice.

		---

		# Part I: Introduction
		*OK, what?*

		---
		
		class: inverse

		## What is your current experience with microservices?

		http://braiden.firebaseapp.com

		---

		class: inverse

		## Let's start with a definition

		### What does microservices mean?

		???

		* Small-ish, < 1000 lines of code, this can actually mean a lot with modern day framworks.
		* Based around problem domains.
		* Services are peers of each other, none really being more important then another
		* Solid well defined interfaces between them
		* Comparisons to a monolithic server architecture is easiest to illustrate the benefits.

		---

		class: inverse

		## Monolithic System

		![Alt text](img/monolithic.png)

		???

		A large system that does something useful for a customer, such as a CRM, Netflix, Google.com.

		---

		class: inverse

		## Microservices

		![Alt text](img/microservice.png)

		???

		A collection of services that by working together do something useful for the a customer.

		---

		class: inverse

		## Some examples

		### Next purchase recomendation engine in a book store
		### Cost reporting engine for cloud resources
		### Watch should I watch next on Netflix?

		---

		class: inverse

		## Isn't microservices just SOA?

		### Microservices is to SOA, what XP is to Agile

		???

		* Pre-emptive slide
		* Subset of SOA and an iteration of it
		* Some people do even call it fine grained SOA (netflix)
		* Microservices is to SOA, what XP is to Agile

		---

		# Part II: Benefits
		*OK, why?*

		???

		* So now we have a definition, why would we want to do something like this?

		---

		class: inverse

		## Brings freedom and choice
		### Empowerment

		???

		* Empowerment - Services solves a problem that can be owned by a team or a group. Empowering them to solve the problem how they want, we just ditate the interface
		
		* Easy to enable new technology, we can trial new technologies on lesser services (in terms of complexity of the problems they solve). Enables you to hire people to solve problems not for their knowledge of a technology stack.

		---

		class: inverse

		## Team structure

		> "organizations which design systems ... are constrained to produce designs which are copies of the communication structures of these organizations" 
		> 
		> M. Conway

		???

		* Conway's law
		* Distributed Agile is quite difficult in practice
		* Teams can now work more effectively accross boundaries but creating problem domains within a physical location

		---

		class: inverse

		## Scalability

		### Won't there be 10's of operations for requests instead of 1?

		???

		* Perhaps but we can scale a lot better in a microservices world, we can scale the 'hot' services rather than just scale the whole thing. It also helps with DB scaling, DB scaling can be hard however in a small fine grained architecture persistance layers are rarely so large scaling becomes a major issue.
		* Scalability of innovation and product delivery. Teams are no longer planning independent changes, rather they can define the interface to their service and build changes within those bounds without the knowledge or the service customers.
		* Fine grained scalability, we can scale, optimise or tweak individual parts of our application as needed rather than just throwing more hardware at the problem.
		* Easier to identify, with good logging where bottlenecks are occuring, but measuring end-to-end uses of an applications and measure the response time of each service.

		---

		class: inverse

		## Agility

		### Architecture that fits the way you work

		???

		* The original AGILE manifesto was focused on trial, measure and correction the repeat. Microservices is an obvious fit for that working model as you can trial new technologies, ways of working, even ide's or hosting. Measure the results, learn and feed into the next service.
		* Can deploy services, and therefore parts of your application individually. No large cordinated deployments with a large amount of associated risk.
		* Means you are able to go from feature inception to delivery a lot faster.

		---

		class: inverse

		## Resiliency

		### Cloud native architecture

		???

		* Services that are loosely coupled can continue even while one of their peers has failed. A great example of this is the Netflix and their cloud native, non-fragile archnitecture.
		* A service can attempt to call another service, and if that fails perhaps default back to a more generic defaut behaviour.
		* By creating *Bulk Heads*, just like in a ship, you can stop failures propergating accross the system by isolating parts of the system.
		* Always set timeouts.

		---

		class: inverse

		## So we agree a smaller more lightweight service is better? Why not a nanoservice or even picoservice?

		### There is a backend as a service that is just a counter.

		???

		* Services should be big enough so they can meaningfully solve a problem 
		* There is a cost going too far the other way, integration testing, deployments and costs of infrastructure.
		* Well the benefits of segregating and isolation are negated by management overhead and interservice communication

		---

		# Part III: Considerations
		*Ok, how?*

		---

		## Where do I standardise and where do I allow autonomy?

		![Alt text](img/standardisation.png)

		???

		* Find a place on a line
		* Enterprises tend to er on standardise
		* Startups tend to be on the other side
		* I am going to show there are parts that need standardisation and there are parts that are free to be autonomous

		---

		class: inverse

		## Where do you think your organisation fits on the standardisation line?

		http://braiden.firebaseapp.com

		---

		class: inverse

		## Deployment
		### Deploy quickly and often

		???

		* By deploying quickly i mean when the release is ready it should rapidly move to production.
		* Often means deploying small production ready changes
		* Standardise the deployment process, so for example while you might have ruby on rails, django and node.js services, they all should be deployed the same way.
		* Use Chef, Puppet or Ansible, so to deploy each app you just run a playbook or cookbook, while these may very from service to actually deploy each service it will be the same.
		* Docker could help with things like this.

		---

		## Integration Testing

		### Consumer driven contracts

		![Alt text](img/integrationtesting.png)

		???

		* Get the customers of your service write tests for your services they consume, this forms a contract
		* Run these tests before each deployment

		---

		## Interfaces

		### Pipes and connections

		![Alt text](img/interconnects.png)

		???

		* Standardise all the pipes and connections, allow autonomy and discretion in the service implementation
		* Important to define the interfaces between them, not necessarily the technology that supports them.
		* REST is a good and well defined standard. Use for the standard error codes HTTP provides.

		---

		class: inverse

		## Monitoring and Logging

		### Aggregate to create and end-to-end picture of your application

		???

		* When something is broken on a monolithic system, it is very easy to see what is broken.
		* In the microservice world, it is much more difficult. As it could be one of N disparate services.
		* Use a log aggregation tools, there are free open source options like logstash. But there are many great options that now play in this place.
		* Logging as a proactive and reactive tool, getting response times. Knowing what normal is. HTTP Error codes. 
		* Use transaction ID, a unique ID for all service interactions involved in a single request.

		---

		class: inverse

		## Transactions

		### These are hard

		???

		* Should be aware of any transactions occuring accross service boundaries, such as between an ticketing and payment system.
		* Transactions couple services together.
		* These should be avoided where posisble

		---

		class: inverse

		## Architectural Safety

		### Be a town planner and not an architect.

		???

		* Like a town planner define policies and regulations around what buildings need it their design they don't define the design themselves
		* Use timeouts, circuit breakers and bulk heads
		* In the references there is a Netflix talk that goes through this in detail.
		* Define archetypes, that developers can use off the shelf to build their services
		* If a service is to use a new technology the team would be expected to build their service conforming to the regulations.

		---

		# Part IV: Getting started
		*Ok, when?*

		???

		* How we start with microservices
		* This can be hard, but their are benefits

		---

		class: inverse

		name: agenda
		class: middle, center

		## Decision Tree
		![Alt text](img/decisiontree.png)

		---

		class: inverse

		## Greenfields

		### Make your standards in iteration 0 and go for it

		???

		* Make your standards highly visible
		* Make sure you constantly

		---

		class: inverse

		## Do you do any feature enhancements on this application?

		### If no, leave it

		???

		* Suits environments with changing conditions, not largely static applications

		---

		class: inverse

		## Is the feature enhancement confined to a single problem domain?

		### Try microservices?

		???

		* Is the maintenance, acting on a particular problem domain of the application that could be pulled out as part of the maintenance work?

		---

		class: inverse

		## Is this enhancement to a part of the application that can be reused elsewhere?

		### Try microservices?

		???

		* By pulling this functionality into a microservice you can reuse the functionality elsewhere in your ecosystem.

		---

		class: inverse

		## Is this enhancement on a very low risk piece of the application?

		### Try microservices?

		???

		* Targetting low risk parts of the application is an obvious way to break some of the functionality away.

		---

		class: inverse

		# Conclusion

		### Microservices is to SOA, as XP is to AGILE
		### Logging is important, aggregate to create and end-to-end picture of your application
		### Standardise the deployment process, deploy often
		### Interfaces - Define you interfaces upfront, use HTTP RESTful
		### Empower your team - By standardising the pipes and connectors and giving autonomy in the service implementation

		---

		class: inverse

		# Picks

		## Dash - Mac Offline Documentation
		## Podcasts - Arrested DevOps, Food Fight Show, Devchat.tv and AWS Pocast****
		## A blog post on making a quadcopter?

		---

		class: inverse

		# About Me

		### Cyclist
		### Quadcopters
		
		<br/>
		<iframe width="420" height="315" src="//www.youtube.com/embed/4xA0LiaLDJo" frameborder="0" allowfullscreen></iframe>

		???

		* Avid cyclist
		* Quadcopters, nothing stimilates boyish enthusiasm in me like Quadcopters, it is grown up lego. Would love to build an API on my two quadcopters and get them to work together.

		---

		class: inverse

		# Follow up

		> http://www.infoq.com/news/2014/03/microservices-soa
		> 
		> http://yow.eventer.com/yow-2013-1080/practical-considerations-for-microservice-architectures-by-sam-newman-1389
		>
		> 

		</textarea>
		<script src="lib/remark/out/remark.min.js" type="text/javascript"></script>
		<script type="text/javascript">
			var slideshow = remark.create();
		</script>
	</body>
</html>
