<!doctype html>

<html lang="en">
	<head>
		<meta charset="utf-8">

		<title>Angular Meetup Melbourne - Protractor JS</title>
		<meta name="description" content="Angular Meetup Melbourne - Protractor JS">
		<meta name="author" content="Braiden Judd">
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
		<link rel="stylesheet" href="css/style.css">
	</head>

	<body>
		<textarea id="source">

		name: inverse
		layout: true
		class: center, middle, inverse

		---

		class: inverse

		# E2E testing of JavaScript with JavaScript
		*Protractor JS*

		---

		class: inverse

		# What is your experience with protractor?

		http://braiden.firebaseapp.com

		---

		layout: false
		class: center, inverse, middle

		# What do I want you to get out of this?
		
		*If you go and download and try protractor in the next week, I win*

		???

		* If you have already got an experience with protractor, this might confirm something you know
		* If you have a high level of experience, I expect to be called out on things and we can disucss

		---

		layout: false
		class: center, inverse, middle

		# Why are tests good?

		*Tests as documentation*

		???

		* Examples of how yo use your API or site
		* In the case of E2E testing, in things like protractor. It is good for translating story card requirements into real documented things.
		* Going a bit Meta, but tests can and should be used as documentation, so the easier to read they are the better they are.
		* DHH Keynote - https://www.youtube.com/watch?v=9LfmrkyP81M
		* Dave Thomas - http://rubyrogues.com/164-rr-staying-sharp-with-dave-thomas/

		---

		layout: false
		class: center

		# What is the best kind of testing?

		![Angular Contributions](img/testingPyramid.png)

		---

		.pull-left[
			## Unit Testing

			- Does this function work?
			- Fast feedback, run on save
			- Best Defence against bugs

		]

		.pull-center[
		<br/><br/><br/><br/><br/><br/><br/>
		# VS
		]
		<br/>
		.pull-right[

			## End-to-end testing
			- Do the sum of the pieces make a greater whole?
			- Is the application usable, by a real user?
			- Is a complement, not a replacement to unit tests
		]

		---
		class: inverse, center, middle
		layout: false

		# Why would we do E2E testing?

		*Gaining confidence your application works, for a real user*

		???

		* Testing the application as a user, not a computer
		* Backend v Frontend. Do they work together nicely?
		* If unit tests are hard to run it probably means you application is hard to run

		---

		# Why is E2E testing hard?

		* You need an environment, need working parts. Webdriver, Chrome and you App. Then run the tests.
		* Very hard to debug
		* Sloooooooooooooooooooooooooooooooooooooooooooooooow
		* Tests, generally have to be up to date with the layout. Hard to keep up to date.

		---

		# Why is it good to write tests in JavaScript?

		*Context switching*

		![Angular Contributions](img/contextSwitching.png)

		---

		# What is Protractor JS?

		![Angular Contributions](img/contributions.png)

		???

		* Written by google to make testing angular JS application easier
		* Introduced 1.2

		---

		class: center

		# What makes up Protractor JS 

		*Webdriver + Chrome (a brower) + Protractor JS*

		![Angular Contributions](img/protractorStack.png)

		---

		class: center, middle, inverse


		# Built for Angular JS

		*Protractor understands angular*

		???

		* Protractor understands angular
		* Understands the way angular does binding
		* Angular gives your page structure and templates and dependency injection

		---

		# Angular Scenario Runner - Differences

		* Webdriver and Selenium
		* Different syntax
		* Can run tests against remote servers
		* Can use Sauce Labs
		* More control over the browser and Firefox, Chrome, Safari etc.
		* Same, high level integration with Angular
		* Runs in an iframe

		---

		# Allows you to write tests in Jasmine

		* Use the same notation as your unit tests
		* Patched to understand angular and async (waitForAngular())
		* See: https://github.com/angular/protractor/issues/909

		![Alt text](img/jasmineLogo.png)

		---

		# What does it not do well?

		* Not angular parts are still hard
		* Setup and teardown of database data
		* Keen to see what others have done here

		---

		class: inverse, middle, center

		## Be wary of old documentation
		*Protractor has changed*

		???

		* Noticed a lot in my research, old ways which no longer work

		---

		class: inverse, middle, center

		# Installation

		```
		npm install -g protractor
		```

		---

		class: inverse, middle, center

		# Setup

		```
		webdriver-manager update
		webdriver-manager start
		```

		*Congratulations you have a webdriver server up and running*

		???

		* A few moving parts, including chromedriver and selenium

		---

		# Bonus - Protractor with a Proxy

		*webdriver-manager does not work with a proxy*

		* Download the webdrive jar and chromedriver.exe manually
		* Match the versions (DO NOT JUST GET THE LATEST!)
		* Copy to the angular locations
		* Happy Days

		---

		# Now you need a configuration file

		Configuration File

		* onPrepare

		---

		# Interactive mode/ Element Explorer

		???

		* Good place to get started
		* Show browser is real
		* Something that does not exist - show easy to comprehend error message
		* Something that does exist - getText(), click() etc.

		---

		## Selecting elements

		```
		element()
		```
		* element() returns a single thing

		```
		element.all()
		```
		* returns an array - for repeaters etc.

		???

		* At the core is the ability to select elements
		* element() returns a single thing
		* element.all() returns an array - for repeaters etc.

		---

		## Helper methods on the .all()

		* get()
		* each()

		---

		## Angular specific bindings

		*by.binding*

		```javascript
		element(by.binding('blog.title')).getText();
		```

		```html
		<h4 ng-bind="blog.title"></h4>
		```

		---

		## Angular specific bindings

		*by.model*

		```javascript
		element(by.model('password')).sendKeys('password');
		```

		```html
		<input ... ng-model="password">
		```

		---

		## Angular specific bindings

		*by.repeater*

		```javascript
		element(by.repeater('blog in blogs')).get(0).getText();
		```

		```html
		<div ng-repeat="blog in blogs" class="...">
			<a ng-href="#/blogs/{{blog.id}}">
				<img ng-src="{{blog.avatar}}" class="..."/>
				<h4 ng-bind="blog.title"></h4>
			</a>
		</div>
		```

		---

		# Demo

		???

		* Site
		* Run the tests
		* Show the tests

		---

		# Extras
		*Others things you should know or understand*

		---

		## Multi browser

		---

		Page objects

		* Split the information about how to interact with the page from the test logic
		* Can just require 
		* http://martinfowler.com/bliki/PageObject.html

		---

		# Resources

		* Another meetup presentation - http://ramonvictor.github.io/protractor/slides/#/
		* Ng Newsletter Article - http://www.ng-newsletter.com/posts/practical-protractor.html
		* Jim Lavin - https://www.youtube.com/watch?v=idb6hOxlyb8
		* Julie Ralph NG Conf - https://www.youtube.com/watch?v=aQipuiTcn3U
		* JavaScript Jabber - http://javascriptjabber.com/106-jsj-protractor-with-julie-ralph/

		---

		class: inverse

		# Picks

		## Dash - Mac Offline Documentation
		## Podcasts - Arrested DevOps, Food Fight Show and Devchat.tv
		## Particle Fever - Awesome documentation about the LHC
		## S3 and Backups
		## Mountain Goat - Rare Breed

		---

		class: inverse

		# About Me

		## Cyclist

		---

		## Dogs
		*Go home nature, you're drunk*

		![Alt text](img/dogs.png)

		---

		# Quadcopters

		<PHOTO />

		---

		## Have a go!

		http://www.confreaks.com/videos/2488-railsconf2013-how-to-talk-to-developers

		http://javascriptjabber.com/090-jsj-users-groups/

		http://rubyrogues.com/064-rr-presenting-at-conferences/

		http://rubyrogues.com/167-rr-speaking-at-conferences/

		*"If you can't explain it simply, you don't understand it well enough"* Albert Einstein

		???

		* Speaking - Encourage someone to speak about unit testing	
		* Give it a go, great for personal development

		</textarea>
		<script src="lib/remark/out/remark.min.js" type="text/javascript"></script>
		<script type="text/javascript">
			var slideshow = remark.create({ratio: '16:9'});
		</script>
	</body>
</html>
